{"tasks":[{"environment":{},"displayName":"Copy Files to: $(build.artifactstagingdirectory)","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"inputs":{"SourceFolder":"$(system.defaultworkingdirectory)","Contents":"**/*.*","TargetFolder":"$(build.artifactstagingdirectory)","CleanTargetFolder":"false","OverWrite":"false","flattenFolders":"false","preserveTimestamp":"false"},"task":{"id":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","versionSpec":"2.*","definitionType":"task"}},{"environment":{},"displayName":"Copy manifest Files to: $(build.artifactstagingdirectory)","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"inputs":{"SourceFolder":"$(system.defaultworkingdirectory)","Contents":"\\manifest.yml","TargetFolder":"$(build.artifactstagingdirectory)","CleanTargetFolder":"false","OverWrite":"false","flattenFolders":"false","preserveTimestamp":"false"},"task":{"id":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","versionSpec":"2.*","definitionType":"task"}},{"environment":{},"displayName":"Prepare analysis on SonarQube","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"inputs":{"SonarQube":"7f8ae7ee-4c99-4835-882a-07178969abc2","scannerMode":"Other","configMode":"file","configFile":"sonar-project.properties","cliProjectKey":"","projectKey":"","cliProjectName":"","projectName":"","cliProjectVersion":"1.0","projectVersion":"1.0","cliSources":".","extraProperties":"# Additional properties that will be passed to the scanner, \n# Put one key=value per line, example:\n# sonar.exclusions=**/*.bin"},"task":{"id":"15b84ca1-b62f-4a2a-a403-89b77a063157","versionSpec":"4.*","definitionType":"task"}},{"environment":{},"displayName":"Run Code Analysis","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"inputs":{},"task":{"id":"6d01813a-9589-4b15-8491-8164aeb38055","versionSpec":"4.*","definitionType":"task"}},{"environment":{},"displayName":"Publish Quality Gate Result","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"inputs":{"pollingTimeoutSec":"300"},"task":{"id":"291ed61f-1ee4-45d3-b1b0-bf822d9095ef","versionSpec":"4.*","definitionType":"task"}},{"environment":{},"displayName":"Build Image","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"inputs":{"containerRegistry":"9d7f5b92-35f2-49a8-acdf-1119b224aef5","repository":"AngularApp","command":"build","Dockerfile":"Dockerfile","buildContext":"**","tags":"latest","arguments":"","addPipelineData":"true","container":""},"task":{"id":"e28912f1-0114-4464-802a-a3a35437fd16","versionSpec":"2.*","definitionType":"task"}},{"environment":{},"displayName":"Push Image","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"inputs":{"containerRegistry":"9d7f5b92-35f2-49a8-acdf-1119b224aef5","repository":"AngularApp","command":"push","Dockerfile":"**/Dockerfile","buildContext":"**","tags":"latest","arguments":"","addPipelineData":"true","container":""},"task":{"id":"e28912f1-0114-4464-802a-a3a35437fd16","versionSpec":"2.*","definitionType":"task"}},{"environment":{},"displayName":"Trivy Security Scan","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"inputs":{"targetType":"inline","filePath":"","arguments":"","script":"#This script will pull the latest trivy software from the github and scan against the image.\n#!/bin/bash\nexport TRIVY_VERSION=$(wget -qO - \"https://api.github.com/repos/aquasecurity/trivy/releases/latest\" | grep '\"tag_name\":' | sed -E 's/.*\"v([^\"]+)\".*/\\1/')\n        echo $TRIVY_VERSION\n        wget --no-verbose https://github.com/aquasecurity/trivy/releases/download/v${TRIVY_VERSION}/trivy_${TRIVY_VERSION}_Linux-64bit.tar.gz -O - | tar -zxvf -\n        ./trivy --exit-code 0 --cache-dir .trivycache/ --no-progress --format template --template \"@contrib/gitlab.tpl\" -o gl-container-scanning-report.json cdedevopsacr.azurecr.io/angularapp:latest\n        ./trivy --exit-code 0 --cache-dir .trivycache/ --no-progress --severity HIGH cdedevopsacr.azurecr.io/angularapp:latest\n        ./trivy --exit-code 1 --cache-dir .trivycache/ --severity CRITICAL --no-progress cdedevopsacr.azurecr.io/angularapp:latest\n        ./trivy --exit-code 0 --cache-dir .trivycache/ --severity LOW --no-progress cdedevopsacr.azurecr.io/angularapp:latest\n        ./trivy --exit-code 0 --cache-dir .trivycache/ --severity MEDIUM --no-progress cdedevopsacr.azurecr.io/angularapp:latest\n","workingDirectory":"","failOnStderr":"false","noProfile":"true","noRc":"true"},"task":{"id":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","versionSpec":"3.*","definitionType":"task"}},{"environment":{},"displayName":"Trivy Security Scan copy","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":false,"timeoutInMinutes":0,"inputs":{"targetType":"inline","filePath":"","arguments":"","script":"#This script will pull the latest trivy software from the github and scan against the image.\n#!/bin/bash\nexport TRIVY_VERSION=$(wget -qO - \"https://api.github.com/repos/aquasecurity/trivy/releases/latest\" | grep '\"tag_name\":' | sed -E 's/.*\"v([^\"]+)\".*/\\1/')\n        echo $TRIVY_VERSION\n        wget --no-verbose https://github.com/aquasecurity/trivy/releases/download/v${TRIVY_VERSION}/trivy_${TRIVY_VERSION}_Linux-64bit.tar.gz -O - | tar -zxvf -\n        ./trivy --exit-code 0 --cache-dir .trivycache/ --no-progress --format template --template \"@contrib/gitlab.tpl\" -o gl-container-scanning-report.json cdedevopsacr.azurecr.io/angularapp:$(Build.BuildId)\n        ./trivy --exit-code 0 --cache-dir .trivycache/ --no-progress --severity HIGH cdedevopsacr.azurecr.io/angularapp:$(Build.BuildId)\n        ./trivy --exit-code 1 --cache-dir .trivycache/ --severity CRITICAL --no-progress cdedevopsacr.azurecr.io/angularapp:$(Build.BuildId)\n        ./trivy --exit-code 0 --cache-dir .trivycache/ --severity LOW --no-progress cdedevopsacr.azurecr.io/angularapp:$(Build.BuildId)\n        ./trivy --exit-code 0 --cache-dir .trivycache/ --severity MEDIUM --no-progress cdedevopsacr.azurecr.io/angularapp:$(Build.BuildId)\n","workingDirectory":"","failOnStderr":"false","noProfile":"true","noRc":"true"},"task":{"id":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","versionSpec":"3.*","definitionType":"task"}},{"environment":{},"displayName":"Publish Artifact: drop","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"inputs":{"PathtoPublish":"$(Build.ArtifactStagingDirectory)","ArtifactName":"drop","ArtifactType":"Container","TargetPath":"","Parallel":"false","ParallelCount":"8","FileCopyOptions":""},"task":{"id":"2ff763a7-ce83-4e1f-bc89-0ae63477cebe","versionSpec":"1.*","definitionType":"task"}}],"runsOn":["Agent","DeploymentGroup"],"revision":37,"createdBy":{"displayName":"Ramachandran Venkatachalam","id":"cddd394b-50c1-65f1-9d61-e9b59ff6d53c","uniqueName":"586894@cognizant.com"},"createdOn":"2020-09-11T17:22:59.023Z","modifiedBy":{"displayName":"Ramachandran Venkatachalam","id":"cddd394b-50c1-65f1-9d61-e9b59ff6d53c","uniqueName":"586894@cognizant.com"},"modifiedOn":"2021-01-26T03:03:33.733Z","comment":"","id":"5f15a6e9-c56a-47ed-9f37-54f17ca21656","name":"KubeDockerAngularBuild Process","version":{"major":1,"minor":0,"patch":0,"isTest":false},"friendlyName":"KubeDockerAngularBuild Process","category":"Deploy","definitionType":"metaTask","demands":[],"groups":[],"inputs":[],"satisfies":[],"sourceDefinitions":[],"dataSourceBindings":[],"instanceNameFormat":"Task group: KubeDockerAngularBuild Process ","preJobExecution":{},"execution":{},"postJobExecution":{}}